{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject, computed, onMounted } from 'vue';\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'NewBookmark',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const appAxios = inject(\"appAxios\");\n    const socket = inject(\"socket\");\n    const store = useStore();\n    const router = useRouter();\n    const categoryList = ref([]);\n    const userData = ref([]);\n    onMounted(() => {\n      appAxios.get(\"/categories\").then(category_response => {\n        //console.log('category_response', category_response)\n        categoryList.value = category_response?.data || [];\n      });\n    });\n    const onSave = () => {\n      const saveData = {\n        ...userData.value,\n        userId: _getCurrentUser?.value.id,\n        created_at: new Date()\n      };\n      appAxios.post(\"/bookmarks\", saveData).then(save_bookmark_response => {\n        console.log(save_bookmark_response);\n        Object.keys(userData.value)?.forEach(field => userData.value[field] = null);\n        const socketData = {\n          ...save_bookmark_response.data,\n          user: _getCurrentUser.value,\n          category: categoryList.value?.find(c => c.id == saveData.categoryId)\n        };\n        socket.emit(\"NEW_BOOKMARK_EVENT\", socketData);\n        router.push({\n          name: 'HomePage'\n        });\n      }); //userdata objesi gidicek \n    };\n\n    const _getCurrentUser = computed(() => store.getters._getCurrentUser);\n    const __returned__ = {\n      appAxios,\n      socket,\n      store,\n      router,\n      categoryList,\n      userData,\n      onSave,\n      _getCurrentUser,\n      ref,\n      inject,\n      computed,\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","computed","onMounted","useStore","useRouter","appAxios","socket","store","router","categoryList","userData","get","then","category_response","value","data","onSave","saveData","userId","_getCurrentUser","id","created_at","Date","post","save_bookmark_response","console","log","Object","keys","forEach","field","socketData","user","category","find","c","categoryId","emit","push","name","getters"],"sources":["C:/Users/Emirhan Sevim/Desktop/vue-proje/booklike-composition/client/src/views/NewBookmark.vue"],"sourcesContent":["<template>\r\n       <div class=\"login_register_container\">\r\n      <h3 class=\"text-2xl text-center mb-3\">Yeni Ekle</h3>\r\n      <input v-model=\"userData.title\" type=\"text\" placeholder=\"Başlık\" class=\"input mb-3\" />\r\n      <input v-model=\"userData.url\" type=\"text\" placeholder=\"URL\" class=\"input mb-3\" />\r\n      <select v-model=\"userData.categoryId\" class=\"input mb-3\">\r\n        <option disabled value=\"\" selected>Kategori</option>\r\n        <option v-for=\"category in categoryList\" :key=\"category.id\" :value=\"category.id\">{{category.name}}</option>\r\n      </select>\r\n      <textarea v-model=\"userData.description\" placeholder=\"Açıklama\" class=\"input mb-3\" cols=\"30\" rows=\"10\"></textarea>\r\n      <div class=\"flex items-center justify-end gap-x-1\">\r\n        <button @click=\"$router.push({name:'HomePage'})\" class=\"secondary-button\">İptal</button>\r\n        <button @click=\"onSave\" class=\"default-button\">Kaydet</button>\r\n      </div>\r\n    </div>\r\n \r\n\r\n</template>\r\n\r\n<script setup>\r\nimport { ref,inject,computed ,onMounted} from 'vue';\r\nimport {useStore} from \"vuex\";\r\nimport {useRouter} from \"vue-router\";\r\n\r\nconst appAxios=inject(\"appAxios\");\r\nconst socket=inject(\"socket\");\r\n\r\nconst store=useStore();\r\nconst router=useRouter();\r\n\r\nconst categoryList=ref([])\r\nconst userData=ref([])\r\n\r\nonMounted(()=>{\r\n  appAxios.get(\"/categories\").then(category_response => {\r\n      //console.log('category_response', category_response)\r\n      categoryList.value = category_response?.data||[];\r\n    })\r\n})\r\nconst onSave=()=>{\r\n      const saveData={\r\n        ...userData.value,\r\n        userId:_getCurrentUser?.value.id,\r\n        created_at:new Date()\r\n      }\r\n      appAxios.post(\"/bookmarks\",saveData).then(save_bookmark_response=>{\r\n        console.log(save_bookmark_response);\r\n        Object.keys(userData.value)?.forEach(field=>(userData.value[field]=null));\r\n       \r\n        const socketData={\r\n        ...save_bookmark_response.data,\r\n        user:_getCurrentUser.value,\r\n        category:categoryList.value?.find(c=>c.id ==saveData.categoryId)\r\n       }\r\n        socket.emit(\"NEW_BOOKMARK_EVENT\",socketData); \r\n         router.push({name:'HomePage'});\r\n      }) //userdata objesi gidicek \r\n    }\r\n    const _getCurrentUser = computed(()=>store.getters._getCurrentUser);\r\n\r\n</script>\r\n"],"mappings":";AAoBA,SAASA,GAAG,EAACC,MAAM,EAACC,QAAQ,EAAEC,SAAS,QAAO,KAAK;AACnD,SAAQC,QAAQ,QAAO,MAAM;AAC7B,SAAQC,SAAS,QAAO,YAAY;;;;;;;IAEpC,MAAMC,QAAQ,GAACL,MAAM,CAAC,UAAU,CAAC;IACjC,MAAMM,MAAM,GAACN,MAAM,CAAC,QAAQ,CAAC;IAE7B,MAAMO,KAAK,GAACJ,QAAQ,CAAC,CAAC;IACtB,MAAMK,MAAM,GAACJ,SAAS,CAAC,CAAC;IAExB,MAAMK,YAAY,GAACV,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMW,QAAQ,GAACX,GAAG,CAAC,EAAE,CAAC;IAEtBG,SAAS,CAAC,MAAI;MACZG,QAAQ,CAACM,GAAG,CAAC,aAAa,CAAC,CAACC,IAAI,CAACC,iBAAiB,IAAI;QAClD;QACAJ,YAAY,CAACK,KAAK,GAAGD,iBAAiB,EAAEE,IAAI,IAAE,EAAE;MAClD,CAAC,CAAC;IACN,CAAC,CAAC;IACF,MAAMC,MAAM,GAACA,CAAA,KAAI;MACX,MAAMC,QAAQ,GAAC;QACb,GAAGP,QAAQ,CAACI,KAAK;QACjBI,MAAM,EAACC,eAAe,EAAEL,KAAK,CAACM,EAAE;QAChCC,UAAU,EAAC,IAAIC,IAAI,CAAC;MACtB,CAAC;MACDjB,QAAQ,CAACkB,IAAI,CAAC,YAAY,EAACN,QAAQ,CAAC,CAACL,IAAI,CAACY,sBAAsB,IAAE;QAChEC,OAAO,CAACC,GAAG,CAACF,sBAAsB,CAAC;QACnCG,MAAM,CAACC,IAAI,CAAClB,QAAQ,CAACI,KAAK,CAAC,EAAEe,OAAO,CAACC,KAAK,IAAGpB,QAAQ,CAACI,KAAK,CAACgB,KAAK,CAAC,GAAC,IAAK,CAAC;QAEzE,MAAMC,UAAU,GAAC;UACjB,GAAGP,sBAAsB,CAACT,IAAI;UAC9BiB,IAAI,EAACb,eAAe,CAACL,KAAK;UAC1BmB,QAAQ,EAACxB,YAAY,CAACK,KAAK,EAAEoB,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACf,EAAE,IAAGH,QAAQ,CAACmB,UAAU;QAChE,CAAC;QACA9B,MAAM,CAAC+B,IAAI,CAAC,oBAAoB,EAACN,UAAU,CAAC;QAC3CvB,MAAM,CAAC8B,IAAI,CAAC;UAACC,IAAI,EAAC;QAAU,CAAC,CAAC;MACjC,CAAC,CAAC,EAAC;IACL,CAAC;;IACD,MAAMpB,eAAe,GAAGlB,QAAQ,CAAC,MAAIM,KAAK,CAACiC,OAAO,CAACrB,eAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}