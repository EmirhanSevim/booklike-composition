{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject } from \"vue\";\nimport CryptoJS from \"crypto-js\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'Login',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const userData = ref({\n      username: null,\n      password: null\n    });\n    const appAxios = inject(\"appAxios\");\n    const onSubmit = () => {\n      const password = CryptoJS.HmacSHA1(userData.value.password, store.getters._saltKey).toString();\n      console.log(password);\n      appAxios.get(`/users?username=${userData.value.username}& password?=${password}`).then(login_response => {\n        if (login_response?.data.length > 0) {\n          store.commit(\"setUser\", login_response?.data[0]);\n          router.push({\n            name: \"HomePage\"\n          });\n        } else {\n          alert(\"Kullanıcı Adı veya Şifre Yanlış\");\n        }\n        console.log(login_response);\n      }).catch(e => console.log(e));\n      //.finally(()=>this.loader=false);\n      //varolan bir arkadaşın bilgisine ulaşmak istiyoruz.\n    };\n\n    const __returned__ = {\n      store,\n      router,\n      userData,\n      appAxios,\n      onSubmit,\n      ref,\n      inject,\n      get CryptoJS() {\n        return CryptoJS;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","CryptoJS","useStore","useRouter","store","router","userData","username","password","appAxios","onSubmit","HmacSHA1","value","getters","_saltKey","toString","console","log","get","then","login_response","data","length","commit","push","name","alert","catch","e"],"sources":["C:/Users/Emirhan Sevim/Desktop/vue-proje/booklike-composition/client/src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login_register_container\">\r\n      <h3 class=\"text-2xl text-center mb-3\">Giriş Yap</h3>\r\n      <input v-model=\"userData.username\" type=\"text\" placeholder=\"Kullanıcı Adı\" class=\"input mb-3\" />\r\n      <input v-model=\"userData.password\" type=\"password\" placeholder=\"Şifre\" class=\"input mb-3\" />\r\n      <button @click=\"onSubmit\" class=\"default-button\">Giriş yap</button>\r\n      <span class=\"text-center mt-3 text-sm\">\r\n        Üye değilim,\r\n        <router-link :to=\"{name:'RegisterPage'}\" class=\"text-red-900 hover:text-black\">\r\n          Üye olmak istiyorum!\r\n        </router-link>\r\n       \r\n      </span>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref,inject } from \"vue\";\r\nimport CryptoJS from \"crypto-js\"\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nconst store=useStore();\r\nconst router=useRouter();\r\nconst userData=ref({\r\n  username:null,\r\n  password:null,\r\n});\r\nconst appAxios=inject(\"appAxios\");\r\nconst onSubmit=()=>{\r\n  const password =CryptoJS.HmacSHA1(userData.value.password,store.getters._saltKey).toString();         \r\n    console.log(password);\r\n    appAxios.get(`/users?username=${userData.value.username}& password?=${password}`)\r\n          .then(login_response=>{\r\n            if(login_response?.data.length>0){\r\n              store.commit(\"setUser\",login_response?.data[0])                \r\n              router.push({name:\"HomePage\"}) \r\n              }\r\n              else{\r\n               alert(\"Kullanıcı Adı veya Şifre Yanlış\")\r\n              }\r\n            console.log(login_response)\r\n            }).catch(e=>console.log(e))\r\n            //.finally(()=>this.loader=false);\r\n            //varolan bir arkadaşın bilgisine ulaşmak istiyoruz.\r\n          }\r\n\r\n</script>\r\n"],"mappings":";AAgBA,SAASA,GAAG,EAACC,MAAM,QAAQ,KAAK;AAChC,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAASC,QAAQ,QAAQ,MAAM;AAC/B,SAASC,SAAS,QAAQ,YAAY;;;;;;;IACtC,MAAMC,KAAK,GAACF,QAAQ,CAAC,CAAC;IACtB,MAAMG,MAAM,GAACF,SAAS,CAAC,CAAC;IACxB,MAAMG,QAAQ,GAACP,GAAG,CAAC;MACjBQ,QAAQ,EAAC,IAAI;MACbC,QAAQ,EAAC;IACX,CAAC,CAAC;IACF,MAAMC,QAAQ,GAACT,MAAM,CAAC,UAAU,CAAC;IACjC,MAAMU,QAAQ,GAACA,CAAA,KAAI;MACjB,MAAMF,QAAQ,GAAEP,QAAQ,CAACU,QAAQ,CAACL,QAAQ,CAACM,KAAK,CAACJ,QAAQ,EAACJ,KAAK,CAACS,OAAO,CAACC,QAAQ,CAAC,CAACC,QAAQ,CAAC,CAAC;MAC1FC,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC;MACrBC,QAAQ,CAACS,GAAG,CAAE,mBAAkBZ,QAAQ,CAACM,KAAK,CAACL,QAAS,eAAcC,QAAS,EAAC,CAAC,CAC1EW,IAAI,CAACC,cAAc,IAAE;QACpB,IAAGA,cAAc,EAAEC,IAAI,CAACC,MAAM,GAAC,CAAC,EAAC;UAC/BlB,KAAK,CAACmB,MAAM,CAAC,SAAS,EAACH,cAAc,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC;UAC/ChB,MAAM,CAACmB,IAAI,CAAC;YAACC,IAAI,EAAC;UAAU,CAAC,CAAC;QAC9B,CAAC,MACG;UACHC,KAAK,CAAC,iCAAiC,CAAC;QACzC;QACFV,OAAO,CAACC,GAAG,CAACG,cAAc,CAAC;MAC3B,CAAC,CAAC,CAACO,KAAK,CAACC,CAAC,IAAEZ,OAAO,CAACC,GAAG,CAACW,CAAC,CAAC,CAAC;MAC3B;MACA;IACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}